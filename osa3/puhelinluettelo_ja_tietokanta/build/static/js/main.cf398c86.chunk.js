(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var c=t(0),u=t(2),o=t.n(u),a=t(14),r=t.n(a),i=(t(20),t(3)),l=t(4),s=t.n(l),b="/api/persons",d={getAll:function(){return s.a.get(b).then((function(e){return e.data}))},create:function(e){return s.a.post(b,e).then((function(e){return e.data}))},remove:function(e){return s.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return s.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))}},j=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"notification",children:n})},f=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})},m=function(e){return Object(c.jsx)("button",{type:"delete",onClick:function(n){return e.feature(n,e.name)},children:"delete"})},h=function(e){return Object(c.jsxs)("p",{children:[e.name," ",e.number," ",Object(c.jsx)(m,{feature:e.feature,persons:e.persons,name:e.name})]})},O=function(e){return Object(c.jsxs)("p",{children:["filter: ",Object(c.jsx)("input",{value:e.inputValue,onChange:e.function})]})},p=function(e){return Object(c.jsxs)("form",{onSubmit:e.submitFunction,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.nameInput,onChange:e.nameFieldChange}),Object(c.jsx)("br",{}),"number: ",Object(c.jsx)("input",{value:e.numberInput,onChange:e.numberFieldChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},g=function(){var e=Object(u.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],a=Object(u.useState)(""),r=Object(i.a)(a,2),l=r[0],s=r[1],b=Object(u.useState)(""),m=Object(i.a)(b,2),g=m[0],v=m[1],x=Object(u.useState)(""),w=Object(i.a)(x,2),C=w[0],F=w[1],S=Object(u.useState)(null),k=Object(i.a)(S,2),I=k[0],N=k[1],T=Object(u.useState)(null),y=Object(i.a)(T,2),A=y[0],D=y[1];Object(u.useEffect)((function(){d.getAll().then((function(e){o(e)}))}),[]),console.log("render",t.length,"persons");console.log(t);var L=function(e,n){window.confirm("Delete "+n+" from phonebook?")?d.remove(t.find((function(e){return e.name===n})).id).then(N("Removed '".concat(n,"'")),setTimeout((function(){N(null)}),5e3)):console.log("ei"),o(t.filter((function(e){return e.name!==n})))},P=Object(u.useState)(!0),B=Object(i.a)(P,2),E=B[0],J=B[1],V=E?t:t.filter((function(e){return e.name.toLowerCase().indexOf(C)>-1}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(j,{message:I}),Object(c.jsx)(f,{message:A}),Object(c.jsx)(O,{inputValue:C,function:function(e){console.log(e.target.value),F(e.target.value),J(!1)}}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(p,{submitFunction:function(e){e.preventDefault();var n={name:l,number:g};console.log(isNaN(g)),console.log(""===g);var c=t.map((function(e){return e.name}));g.length<3||l.length<8?D("Name or number too short. Name must be at least 3 characters and number must be at least 8 characters. "):-1===c.indexOf(l)?d.create(n).then((function(e){o(t.concat(e))}),N("Added '".concat(l,"'")),setTimeout((function(){N(null)}),5e3)):window.confirm(l+" is already added to the phonebook, replace old number with new?")?d.update(t.find((function(e){return e.name===l})).id,n).then((function(e){N("Updated '".concat(l,"'"))}),setTimeout((function(){N(null)}),5e3)).catch((function(e){D("Information for  '".concat(l,"' has already been removed from server")),setTimeout((function(){D(null)}),5e3)})):window.alert(l+" is already added to phonebook"),setTimeout((function(){D(null)}),5e3)},nameInput:l,nameFieldChange:function(e){console.log(e.target.value),s(e.target.value)},numberInput:g,numberFieldChange:function(e){console.log(e.target.value),v(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)("ul",{children:V.map((function(e,n){return Object(c.jsx)(h,{persons:t,feature:L,name:e.name,number:e.number},n)}))})]})},v=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,39)).then((function(n){var t=n.getCLS,c=n.getFID,u=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),c(e),u(e),o(e),a(e)}))};r.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root")),v()}},[[38,1,2]]]);
//# sourceMappingURL=main.cf398c86.chunk.js.map